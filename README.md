subsonikang
===========

My Kang of the Subsonic Media Streaming server project

Based on Subsonic.org's 4.7 release with the following "enhancements:"

**Ugly work-around for improperly formed podcast URLs when behind an SSL proxy.**

If you have a setup like this:

```
web --https--> apache ---http--> subsonic
```

Then will see that the podcast URLs generated by subsonic for your playlist are wrong - they get the local IP address
of your subsonic server, and not the host from the URL the client used to access them. This basically renders
them useless outside of your home network.  If you're not using https anywhere, the fix is to put

```sh
ProxyPreserveHost On
```

into your apache config for your subsonic virtual host. The problem is, this breaks SSL by causing subsonic to
try to do something with an about:blank page showing home.view from an http URL on your server. Weird.

So with my kang build here, you can add a custom request header for your subsonic called Subsonic-Podcast-Base-URL,
and this will over-ride whatever subsonic would otherwise use when generating podcast URLs.  Yes, I know .. it's ugly,
but it does actually work.

**Self-Licensing Feature**

Want your subsonic to think it's licensed?  Just put your email address into your subsonic.properties file before
starting the server, then access the donate page. You'll see it fills in your license code automatically. Neat, huh?

**Building The WAR file**

I've kanged this directly from KHresearch. Thank you, sir.

First, make sure you have a relatively recent version of Maven and a JDK. The 1.6.x series of OpenJDK 
and the official Oracle JDK(Java 6) have both been tested to work. Ensure that mvn can be found in one of 
the directories listed in your $PATH and that $JAVA_HOME is set to your JDK:

```sh
$ which mvn
/usr/local/bin/mvn
$ echo $JAVA_HOME
/usr/lib/jvm/java-1.6.0-openjdk.x86_64
```

Now you can clone a copy of this repository and switch to the release branch if it is not automatically checked out:

```sh
$ git clone git://github.com/KHresearch/subsonic.git
$ cd subsonic
$ git checkout release
```

At this point you are ready to build the basic Subsonic WAR. The maintainer of this repository does not use any of 
the other build targets(Windows EXE installer, Android app, standalone RPM, etc), and no documentation is provided 
for them(Pull Requests welcomed).

```sh
$ mvn package
<lots of buildspam>
[INFO] Building war: /path/to/repo/subsonic/subsonic-main/target/subsonic.war
<more buildspam>
```

You can now copy this WAR into your Tomcat server's webapps/ directory and deploy it from the Tomcat Manager. 
If you are feeling adventurous you can attempt to install the Official Subsonic Windows application and then 
switch the provided WAR with the one you just built. If you're too scared to do this, contact me and I'll
maybe see about hooking you up.

```sh
$ cp subsonic-main/target/subsonic.war /usr/share/subsonic
```

Good luck!

